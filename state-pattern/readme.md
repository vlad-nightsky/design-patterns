## Паттерн состояние | State Pattern

Паттерн состояние управляет изменением поведения объекта при изменении его внутреннего состояния.
Внешне это выглядит так, словно объект меняет свой класс.

Для этого паттерна объявляется общий интерфейс состояние (`State`).
Все состояния наследуются от этого интерфейса, а следовательно становятся взаимозаменяемыми.

Объявляется `Context` - класс с несколькими внутренними состояниями.
Действия c `Context` делегируются объектам состояний для обработки.

Классы состояний обрабатывают запросы от `Context`.
Каждый класс предоставляет свою реализацию запроса.
Таким образом при изменении состояния, меняется и поведение.

### Ключевые моменты паттерна состояние

- Паттерн Состояние позволяет иметь объекту много разных вариантов поведения в зависимости от его внутреннего состояния
- В отличие от процедурных конечных автоматов, состояние в этом паттерне представляется полноценным классом
- Поведение контекста реализуется делегированием выполняемых операций текущему объекту состояния, с которым он связан
  посредством композиции
- Инкапсуляция состояния в классе локализует его возможные изменения
- Паттерны Состояние и Стратегия имеют похожие диаграммы классов, но решают разные задачи
- Паттерн Стратегия обычно определяет в класс контекста поведение алгоритма
- Паттерн Состояние изменяет поведения контекста в соответствии с изменениями его состояния
- Переходами между состояниями могут управлять как и классы состояний, так и классы контекстов
- Применение паттерна Состояние обычно увеличивает количество классов в архитектуре
- Классы состояний могут совместно использоваться несколькими экземплярами контекстов